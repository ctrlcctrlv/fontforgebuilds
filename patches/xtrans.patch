diff -ruBw xtrans-1.3.4/Xtrans.c xtrans-1.3.4-a/Xtrans.c
--- xtrans-1.3.4/Xtrans.c	2014-03-27 20:52:48.000000000 +0800
+++ xtrans-1.3.4-a/Xtrans.c	2014-05-18 20:20:29.287600000 +0800
@@ -53,6 +53,10 @@
 #ifdef HAVE_SYSTEMD_DAEMON
 #include <systemd/sd-daemon.h>
 #endif
+#ifdef WIN32
+#include <X11/XWinsock.h>
+#endif
+
 
 /*
  * The transport table contains a definition for every transport (protocol)
@@ -700,7 +704,7 @@
 #if defined(WIN32)
 	{
 #ifdef WIN32
-	    u_long arg;
+	    unsigned long arg;
 #else
 	    int arg;
 #endif
